---
import SiteLayout from "../../layouts/SiteLayout.astro";
const { id } = Astro.params;
const res = await fetch(`/api/messages/${id}`);
let message = null;
let error = null;

if (res.status === 200) {
    message = await res.json();
} else if (res.status === 410) {
    error = "Este mensaje ha expirado o ya fue leÃ­do.";
} else {
    error = "Mensaje no disponible o invÃ¡lido.";
}
---
<SiteLayout>
    <div class="bg-zinc-900 p-6 rounded-xl shadow-lg">
        {error ? (
                <div class="text-center text-red-400 text-lg font-semibold">
                    ğŸš« {error}
                </div>
        ) : (
                <>
                    <h2 class="text-xl font-semibold mb-4">ğŸ“© Mensaje recibido</h2>
                    <div class="bg-zinc-800 p-4 rounded-md border border-zinc-700 text-zinc-200 whitespace-pre-wrap">
                        {message ? message.content : ""}
                    </div>
                    <p class="mt-4 text-sm text-zinc-500">
                        Este mensaje ya ha sido marcado como leÃ­do y no podrÃ¡ volver a verse.
                    </p>
                </>
        )}
    </div>
</SiteLayout>
