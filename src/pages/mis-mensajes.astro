---
import SiteLayout from "../layouts/SiteLayout.astro";
import MessageList from "../components/MessageList";
import PageWrapper from "../components/PageWrapper";

// Get the Backend User object when you need access to the user's information
const user = await Astro.locals.currentUser();
import CopyLinkWithFeedback from "../components/CopyLinkWithFeedback.tsx";


const res = await fetch("/api/messages/user", {
    headers: {Authorization: `Bearer ${Astro.cookies.get("__session")?.value}`},
});

const mensajes = res.ok ? await res.json() : [];
const now = new Date();
---
<SiteLayout>
    <PageWrapper>
        <MessageList messages={mensajes}/>
    </PageWrapper>
</SiteLayout>